"use strict";var myAllSongsController=angular.module("myAllSongsController",["ngResource"]);myAllSongsController.controller("myAllSongsController",["$rootScope","$scope","$location","$log","$http","player","aliceBootbox",function(e,t,n,r,i,s,o){e.location="myAllSongs";t.permissions=[{name:"world",value:"World"},{name:"friend",value:"Friend"},{name:"me",value:"Private"}];i.post("/getMyAllSongs",{}).success(function(e,n,r,i){t.currentPlaylist={};t.currentPlaylist.songs=e;t.currentPlaylist.playingMethod="arrow-right";s.init(t)});t.removeMySong=function(e,n){$("#loading_modal").modal("show");i.post("/myAllSongs/removeMySong",{song:e}).success(function(e,r,o,u){i.post("/getMyAllSongs",{}).success(function(e,r,i,o){t.currentPlaylist.songs=e;s.currentScope=t;s.playlist=t.currentPlaylist;if(s.currentSongIndex>n&&s.currentSongIndex>0){s.currentSongIndex--;s.currentSong=s.playlist.songs[s.currentSongIndex]}$("#loading_modal").modal("hide")})})};t.updatePlayMethod=function(e){if(e!==t.currentPlaylist.playingMethod){t.currentPlaylist.playingMethod=e}};t.goUpdateMySong=function(e){t.editSong=e;$("#updateMySong").modal("show")};t.updateMySong=function(){i.post("/updateMySong",{song:t.editSong}).success(function(e,n,r,s){i.post("/getMyAllSongs",{}).success(function(e,n,r,i){t.currentPlaylist.songs=e})});$("#updateMySong").modal("hide")};t.play=function(){s.play();t.playing=s.playing};t.stop=function(){s.stop();t.playing=s.playing};t.pause=function(){s.pause();t.playing=s.playing};t.playPrev=function(){s.playPrev();t.playing=s.playing};t.playNext=function(){s.playNext();t.playing=s.playing};t.wait=function(e){if(e){$("#loading_modal").modal("show")}else{$("#loading_modal").modal("hide")}};t.error=function(e){o.dialog(e,"Loading error !!")};t.curentPlayingMinutes=function(){if(s.currentScope.progress>0){return t.convertToMinute(parseInt(s.currentScope.progress))}else{return"00:00"}};t.curentDurationMinutes=function(){if(s.currentDuration()>0){return t.convertToMinute(s.currentDuration())}else{return"00:00"}};t.convertToMinute=function(e){if(e&&e>0){var t=Math.floor(e/60);var n=e-t*60;if(t<10){t="0"+t.toString()}if(n<10){n="0"+n.toString()}return t+":"+n}else{return"00:00"}};t.viewSongDetails=function(e){e.showDetails=!e.showDetails;return e.showDetails};t.isActive=function(e){if(s.currentSongIndex==e){return"active"}};t.playThisSong=function(e){if(s.currentSongIndex!=e){s.playAt(e);t.playing=s.playing;t.progress=s.currentTime()}}}])